"use strict";var m=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var F=(i,e)=>{for(var o in e)m(i,o,{get:e[o],enumerable:!0})},b=(i,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of w(e))!P.call(i,t)&&t!==o&&m(i,t,{get:()=>e[t],enumerable:!(r=L(e,t))||r.enumerable});return i};var j=i=>b(m({},"__esModule",{value:!0}),i);var C={};F(C,{default:()=>v});module.exports=j(C);var E=require("path"),S=require("@rollup/pluginutils");var g="vite-eslint-plugin";var h=require("fs");function y(i){return i.split("?",2)[0]}function x(i){return!(0,h.existsSync)(i)}function O(i){let{eslintPath:e,lintOnStart:o,include:r,exclude:t,formatter:u,failOnError:p,failOnWarning:n,...c}=i;return c}async function f(i){return i.then(e=>[null,e]).catch(e=>[e,void 0])}async function d(i,e,o,r,t,u){let[p,n]=await f(e.lintFiles(o));if(p)return Promise.reject(p);if(r.fix&&n){let[a]=await f(u(n));if(a)return Promise.reject(a)}let c=n.some(a=>a.warningCount>0),s=n.some(a=>a.errorCount>0),l=await t(n);return l!=null&&l.length&&(console.log(""),i.warn("\u{1F4C3} ESLint problems"),console.log(l)),c&&r.failOnWarning?i.error("\u{1F6A8} Check console for ESLint warning(s) \u{1F446}"):s&&r.failOnError?i.error("\u{1F6A8} Check console for ESLint error(s) \u{1F446}"):Promise.resolve()}function v(i={}){let e,o,r,t,u,p=new Set;return{name:g,async configResolved(n){t={lintOnStart:!1,include:["**/*.js","**/*.jsx","**/*.ts","**/*.tsx","**/*.vue","**/*.svelte"],exclude:["**/node_modules/**"],cacheLocation:(0,E.resolve)(n.cacheDir,".eslintcache"),formatter:"stylish",failOnWarning:!1,failOnError:!0,errorOnUnmatchedPattern:!1,...i}},async buildStart(){let[n,c]=await f(import(t.eslintPath??"eslint"));if(n)this.error("Failed to import ESLint, do you install or configure eslintPath?");else{let s=O(t);switch(e=new c.ESLint(s),u=c.ESLint.outputFixes,o=(0,S.createFilter)(t.include,t.exclude),typeof t.formatter){case"string":r=(await e.loadFormatter(t.formatter)).format;break;case"function":r=t.formatter;break;default:break}if(t.lintOnStart&&t.include){let[l]=await f(d(this,e,t.include,t,r,u));l&&this.error(l.message)}}},async transform(n,c){let s=y(c),l=x(s);if(l&&p.has(s)&&p.delete(s),!o(s)||await e.isPathIgnored(s)||l)return null;t.cache&&p.add(s);let[a]=await f(d(this,e,t.cache?Array.from(p):s,t,r,u));return a&&this.error(a.message),null}}}0&&(module.exports={});
